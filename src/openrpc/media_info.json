{
    "openrpc": "1.2.4",
    "info": {
        "title": "MediaInfo",
        "description": "A module for query info about the media currently in the media pipeline (either playing or paused).",
        "version": "0.0.0"
    },
    "methods": [
        {
            "name": "activeAudioFormats",
            "summary": "Get a list of the active audio formats currently used across all media pipelines.",
            "tags": [
                {
                    "name": "property:readonly"
                },
                {
                    "name": "capabilities",
                    "x-manages": [
                        "xrn:firebolt:capability:media-info:audio-format"
                    ]
                }
            ],
            "params": [],
            "result": {
                "name": "activeAudioFormats",
                "summary": "The active audio formats used across all pipelines.",
                "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/components/schemas/AudioFormat"
                    }
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [],
                    "result": {
                        "name": "Default Result",
                        "value": [
                            {
                                "bitRate": 128,
                                "channels": "2",
                                "codec": "aac",
                                "codecProfile": "mp2lc",
                                "container": "audio/mp4",
                                "pipelineId": 1,
                                "sampleRate": 48
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "activeVideoFormats",
            "summary": "Get a list of the active video formats currently used across all media pipelines.",
            "tags": [
                {
                    "name": "property:readonly"
                },
                {
                    "name": "capabilities",
                    "x-manages": [
                        "xrn:firebolt:capability:media-info:video-format"
                    ]
                }
            ],
            "params": [],
            "result": {
                "name": "activeVideoFormats",
                "summary": "The active video formats used across all pipelines.",
                "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/components/schemas/VideoFormat"
                    }
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [],
                    "result": {
                        "name": "Default Result",
                        "value": [
                            {
                                "codec": "hevc",
                                "codecLevel": "4.2",
                                "codecProfile": "main",
                                "container": "video/mp4",
                                "frameRate": 30,
                                "hdr": [
                                    "hdr10"
                                ],
                                "pipelineId": 1,
                                "resolution": [
                                    1920,
                                    1080
                                ]
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "audioFormat",
            "summary": "Get the audio format currently used by the specified media pipeline.",
            "tags": [
                {
                    "name": "property:readonly",
                    "x-session": "sessionId",
                    "x-session-name": "mediaSession"
                },
                {
                    "name": "capabilities",
                    "x-uses": [
                        "xrn:firebolt:capability:media-info:audio-format"
                    ]
                }
            ],
            "params": [
                {
                    "name": "pipelineId",
                    "required": true,
                    "schema": {
                        "$ref": "#/components/schemas/PipelineId"
                    }
                }
            ],
            "result": {
                "name": "audioFormat",
                "summary": "Audio format used by the pipeline.",
                "schema": {
                    "$ref": "#/components/schemas/AudioFormat"
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "pipelineId",
                            "value": 1
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                            "bitRate": 128,
                            "channels": "2",
                            "codec": "aac",
                            "container": "audio/mp4",
                            "pipelineId": 1,
                            "sampleRate": 48
                        }
                    }
                }
            ]
        },
        {
            "name": "onActiveAudioFormatsChanged",
            "summary": "Get notified when the active audio formats used across all media pipelines starts, stops, or changes.",
            "tags": [
                {
                    "name": "event"
                },
                {
                    "name": "capabilities",
                    "x-manages": [
                        "xrn:firebolt:capability:media-info:audio-format"
                    ]
                }
            ],
            "params": [],
            "result": {
                "name": "onActiveAudioFormatsChanged",
                "summary": "The updated audio formats used across all pipelines.",
                "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/components/schemas/AudioFormat"
                    }
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [],
                    "result": {
                        "name": "Default Result",
                        "value": [
                            {
                                "bitRate": 128,
                                "channels": "5.1",
                                "codec": "aac",
                                "container": "audio/mp4",
                                "pipelineId": 1,
                                "sampleRate": 48
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "onActiveVideoFormatsChanged",
            "summary": "Get notified when the active video formats used across all media pipelines starts, stops, or changes.",
            "tags": [
                {
                    "name": "event"
                },
                {
                    "name": "capabilities",
                    "x-manages": [
                        "xrn:firebolt:capability:media-info:video-format"
                    ]
                }
            ],
            "params": [],
            "result": {
                "name": "onActiveVideoFormatsChanged",
                "summary": "The updated video formats used across all pipelines.",
                "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/components/schemas/VideoFormat"
                    }
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [],
                    "result": {
                        "name": "Default Result",
                        "value": [
                            {
                                "codec": "hevc",
                                "codecLevel": "4.2",
                                "codecProfile": "main",
                                "container": "video/mp4",
                                "frameRate": 30,
                                "hdr": [
                                    "hdr10"
                                ],
                                "pipelineId": 1,
                                "resolution": [
                                    1920,
                                    1080
                                ]
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "videoFormat",
            "summary": "Get the video format currently used by the specified media pipeline.",
            "tags": [
                {
                    "name": "property:readonly",
                    "x-session": "sessionId",
                    "x-session-name": "mediaSession"
                },
                {
                    "name": "capabilities",
                    "x-uses": [
                        "xrn:firebolt:capability:media-info:video-format"
                    ]
                }
            ],
            "params": [
                {
                    "name": "pipelineId",
                    "required": true,
                    "schema": {
                        "$ref": "#/components/schemas/PipelineId"
                    }
                }
            ],
            "result": {
                "name": "videoFormat",
                "summary": "Video format used by the pipeline.",
                "schema": {
                    "$ref": "#/components/schemas/VideoFormat"
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "pipelineId",
                            "value": 1
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                            "codec": "hevc",
                            "codecLevel": "4.2",
                            "codecProfile": "main",
                            "container": "video/mp4",
                            "frameRate": 30,
                            "hdr": [
                                "hdr10"
                            ],
                            "pipelineId": 1,
                            "resolution": [
                                1920,
                                1080
                            ]
                        }
                    }
                }
            ]
        }
    ],
    "components": {
        "schemas": {
            "AudioFormat": {
                "type": "object",
                "description": "Details on the audio content format.",
                "properties": {
                    "bitRate": {
                        "description": "The audio bitrate in kbps.",
                        "type": "number"
                    },
                    "channels": {
                        "description": "The audio output channels.",
                        "type": "string"
                    },
                    "codec": {
                        "$ref": "#/components/schemas/AudioCodec"
                    },
                    "codecLevel": {
                        "$ref": "#/components/schemas/AudioCodecLevel"
                    },
                    "codecProfile": {
                        "$ref": "#/components/schemas/AudioCodecProfile"
                    },
                    "container": {
                        "$ref": "#/components/schemas/AudioContainer"
                    },
                    "pipelineId": {
                        "$ref": "#/components/schemas/PipelineId"
                    },
                    "sampleRate": {
                        "description": "The audio sample rate in kHz.",
                        "type": "number"
                    }
                },
                "required": [
                    "codec",
                    "channels",
                    "pipelineId",
                    "sampleRate"
                ]
            },
            "PipelineId": {
                "type": "integer",
                "description": "The media pipeline/session ID",
                "minimum": 0,
                "maximum": 15
            },
            "VideoFormat": {
                "type": "object",
                "description": "Details on the video content format.",
                "properties": {
                    "codec": {
                        "$ref": "#/components/schemas/VideoCodec"
                    },
                    "codecLevel": {
                        "type": "string",
                        "enum": [
                            "4.1",
                            "4.2",
                            "5.0",
                            "5.1",
                            "high",
                            "main"
                        ]
                    },
                    "codecProfile": {
                        "type": "string",
                        "enum": [
                            "high",
                            "main",
                            "main10",
                            "p0",
                            "p2"
                        ]
                    },
                    "container": {
                        "$ref": "#/components/schemas/VideoContainer"
                    },
                    "frameRate": {
                        "type": "number"
                    },
                    "hdr": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/HDRProfile"
                        }
                    },
                    "pipelineId": {
                        "$ref": "#/components/schemas/PipelineId"
                    },
                    "resolution": {
                        "$ref": "#/components/schemas/Dimensions"
                    }
                },
                "required": [
                    "codec",
                    "pipelineId",
                    "resolution"
                ]
            },
            "AudioCodec": {
                "type": "string",
                "description": "Audio codec",
                "enum": [
                    "aac",
                    "ac3",
                    "ac4",
                    "dts-x",
                    "eac3",
                    "mpeg3",
                    "opus",
                    "truehd",
                    "unknown",
                    "vorbis"
                ]
            },
            "AudioCodecLevel": {
                "description": "Audio codec level",
                "type": "string",
                "enumKeyPrefix": "level",
                "enum": [
                    "3.0",
                    "3.1",
                    "4.0",
                    "4.1",
                    "4.2",
                    "5.0",
                    "5.1"
                ]
            },
            "AudioCodecProfile": {
                "description": "Audio codec profile",
                "type": "string",
                "enum": [
                    "high",
                    "main",
                    "main10",
                    "mp2lc",
                    "mp4he",
                    "p0",
                    "p2"
                ]
            },
            "AudioContainer": {
                "description": "Audio container",
                "type": "string",
                "enum": [
                    "audio/mpeg",
                    "audio/mp4",
                    "audio/ogg",
                    "audio/webm"
                ]
            },
            "AudioMode": {
                "description": "Audio output mode",
                "type": "string",
                "enum": [
                    "auto",
                    "mono",
                    "none",
                    "passthrough",
                    "stereo",
                    "surround",
                    "unknown"
                ]
            },
            "Colorimetry": {
                "description": "Colorimetry",
                "type": "string",
                "enum": [
                    "BT2020cYCC",
                    "BT2020RGB",
                    "BT2020YCC",
                    "DCI-P3",
                    "ICtCp",
                    "opRGB",
                    "opYCC601",
                    "sYCC601",
                    "xvYCC601",
                    "xvYCC709",
                    "unknown"
                ]
            },
            "Dimensions": {
                "type": "array",
                "description": "The dimensions specified as width and height.",
                "items": [
                    {
                        "type": "number"
                    },
                    {
                        "type": "number"
                    }
                ],
                "additionalItems": false,
                "minItems": 2,
                "maxItems": 2
            },
            "HDRProfile": {
                "type": "string",
                "description": "HDR profile",
                "enum": [
                    "dolbyVision",
                    "hdr10",
                    "hdr10plus",
                    "hlg",
                    "sdr",
                    "unknown"
                ]
            },
            "ResolutionName": {
                "description": "User-friendly resolution name",
                "type": "string",
                "enum": [
                    "sd",
                    "hd",
                    "fhd",
                    "uhd",
                    "unknown"
                ]
            },
            "VideoCodec": {
                "type": "string",
                "description": "video codec",
                "enum": [
                    "av1",
                    "avc",
                    "hevc",
                    "mpeg1",
                    "mpeg2",
                    "vp8",
                    "vp9",
                    "vp10"
                ]
            },
            "VideoContainer": {
                "description": "Video container format",
                "type": "string",
                "enum": [
                    "video/mpeg",
                    "video/mp2t",
                    "video/mp4",
                    "video/webm"
                ]
            },
            "VideoMode": {
                "description": "Video output mode; the shorthand resolution and frame rate",
                "type": "string",
                "enumKeyPrefix": "mode",
                "enum": [
                    "480i",
                    "480p",
                    "576i25",
                    "576p50",
                    "576p60",
                    "720p50",
                    "720p60",
                    "1080i50",
                    "1080i60",
                    "1080p24",
                    "1080p25",
                    "1080p30",
                    "1080p50",
                    "1080p60",
                    "2160p24",
                    "2160p25",
                    "2160p30",
                    "2160p50",
                    "2160p60",
                    "4320p60",
                    "unknown"
                ]
            }
        }
    }
}
